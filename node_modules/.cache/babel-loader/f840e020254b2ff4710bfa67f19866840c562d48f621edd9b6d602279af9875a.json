{"ast":null,"code":"import _slicedToArray from\"C:/projects/Dapps/sev frontend/paywithsev/paywithSev/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";import{DollarOutlined,SwapOutlined}from\"@ant-design/icons\";import{Modal,Input,InputNumber}from\"antd\";import{usePrepareContractWrite,useContractWrite,useWaitForTransaction}from\"wagmi\";import{polygonMumbai}from\"@wagmi/chains\";import ABI from\"../abi.json\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";function RequestAndPay(_ref){var requests=_ref.requests,getNameAndBalance=_ref.getNameAndBalance;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),payModal=_useState2[0],setPayModal=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),requestModal=_useState4[0],setRequestModal=_useState4[1];var _useState5=useState(5),_useState6=_slicedToArray(_useState5,2),requestAmount=_useState6[0],setRequestAmount=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),requestAddress=_useState8[0],setRequestAddress=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),requestMessage=_useState10[0],setRequestMessage=_useState10[1];var _usePrepareContractWr=usePrepareContractWrite({chainId:polygonMumbai.id,address:\"0xEa187E4D0229a4e662558B6439c087c60831290b\",abi:ABI,functionName:\"payRequest\",args:[0],overrides:{value:String(Number(requests[\"1\"][0]*1e18))}}),config=_usePrepareContractWr.config;var _useContractWrite=useContractWrite(config),write=_useContractWrite.write,data=_useContractWrite.data;var _usePrepareContractWr2=usePrepareContractWrite({chainId:polygonMumbai.id,address:\"0xEa187E4D0229a4e662558B6439c087c60831290b\",abi:ABI,functionName:\"createRequest\",args:[requestAddress,requestAmount,requestMessage]}),configRequest=_usePrepareContractWr2.config;var _useContractWrite2=useContractWrite(configRequest),writeRequest=_useContractWrite2.write,dataRequest=_useContractWrite2.data;var _useWaitForTransactio=useWaitForTransaction({hash:data===null||data===void 0?void 0:data.hash}),isSuccess=_useWaitForTransactio.isSuccess;var _useWaitForTransactio2=useWaitForTransaction({hash:dataRequest===null||dataRequest===void 0?void 0:dataRequest.hash}),isSuccessRequest=_useWaitForTransactio2.isSuccess;var showPayModal=function showPayModal(){setPayModal(true);};var hidePayModal=function hidePayModal(){setPayModal(false);};var showRequestModal=function showRequestModal(){setRequestModal(true);};var hideRequestModal=function hideRequestModal(){setRequestModal(false);};useEffect(function(){if(isSuccess||isSuccessRequest){getNameAndBalance();}},[isSuccess,isSuccessRequest]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Modal,{title:\"Confirm Payment\",open:payModal,onOk:function onOk(){write===null||write===void 0?void 0:write();hidePayModal();},onCancel:hidePayModal,okText:\"Proceed To Pay\",cancelText:\"Cancel\",children:requests&&requests[\"0\"].length>0&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"h2\",{children:[\"Sending payment to \",requests[\"3\"][0]]}),/*#__PURE__*/_jsxs(\"h3\",{children:[\"Value: \",requests[\"1\"][0],\" Matic\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"\\\"\",requests[\"2\"][0],\"\\\"\"]})]})}),/*#__PURE__*/_jsxs(Modal,{title:\"Request A Payment\",open:requestModal,onOk:function onOk(){writeRequest===null||writeRequest===void 0?void 0:writeRequest();hideRequestModal();},onCancel:hideRequestModal,okText:\"Proceed To Request\",cancelText:\"Cancel\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"Amount (Matic)\"}),/*#__PURE__*/_jsx(InputNumber,{value:requestAmount,onChange:function onChange(val){return setRequestAmount(val);}}),/*#__PURE__*/_jsx(\"p\",{children:\"From (address)\"}),/*#__PURE__*/_jsx(Input,{placeholder:\"0x...\",value:requestAddress,onChange:function onChange(val){return setRequestAddress(val.target.value);}}),/*#__PURE__*/_jsx(\"p\",{children:\"Message\"}),/*#__PURE__*/_jsx(Input,{placeholder:\"Lunch Bill...\",value:requestMessage,onChange:function onChange(val){return setRequestMessage(val.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"requestAndPay\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"quickOption\",onClick:function onClick(){showPayModal();},children:[/*#__PURE__*/_jsx(DollarOutlined,{style:{fontSize:\"26px\"}}),\"Pay\",requests&&requests[\"0\"].length>0&&/*#__PURE__*/_jsx(\"div\",{className:\"numReqs\",children:requests[\"0\"].length})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"quickOption\",onClick:function onClick(){showRequestModal();},children:[/*#__PURE__*/_jsx(SwapOutlined,{style:{fontSize:\"26px\"}}),\"Request\"]})]})]});}export default RequestAndPay;","map":{"version":3,"names":["React","useState","useEffect","DollarOutlined","SwapOutlined","Modal","Input","InputNumber","usePrepareContractWrite","useContractWrite","useWaitForTransaction","polygonMumbai","ABI","jsxs","_jsxs","Fragment","_Fragment","jsx","_jsx","RequestAndPay","_ref","requests","getNameAndBalance","_useState","_useState2","_slicedToArray","payModal","setPayModal","_useState3","_useState4","requestModal","setRequestModal","_useState5","_useState6","requestAmount","setRequestAmount","_useState7","_useState8","requestAddress","setRequestAddress","_useState9","_useState10","requestMessage","setRequestMessage","_usePrepareContractWr","chainId","id","address","abi","functionName","args","overrides","value","String","Number","config","_useContractWrite","write","data","_usePrepareContractWr2","configRequest","_useContractWrite2","writeRequest","dataRequest","_useWaitForTransactio","hash","isSuccess","_useWaitForTransactio2","isSuccessRequest","showPayModal","hidePayModal","showRequestModal","hideRequestModal","children","title","open","onOk","onCancel","okText","cancelText","length","onChange","val","placeholder","target","className","onClick","style","fontSize"],"sources":["C:/projects/Dapps/sev frontend/paywithsev/paywithSev/src/componets/RequestAndPay.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { DollarOutlined, SwapOutlined } from \"@ant-design/icons\";\nimport { Modal, Input, InputNumber } from \"antd\";\nimport { usePrepareContractWrite, useContractWrite, useWaitForTransaction  } from \"wagmi\";\nimport { polygonMumbai } from \"@wagmi/chains\";\nimport ABI from \"../abi.json\";\n\nfunction RequestAndPay({ requests, getNameAndBalance }) {\n  const [payModal, setPayModal] = useState(false);\n  const [requestModal, setRequestModal] = useState(false);\n  const [requestAmount, setRequestAmount] = useState(5);\n  const [requestAddress, setRequestAddress] = useState(\"\");\n  const [requestMessage, setRequestMessage] = useState(\"\");\n\n  const { config } = usePrepareContractWrite({\n    chainId: polygonMumbai.id,\n    address: \"0xEa187E4D0229a4e662558B6439c087c60831290b\",\n    abi: ABI,\n    functionName: \"payRequest\",\n    args: [0],\n    overrides: {\n      value: String(Number(requests[\"1\"][0] * 1e18)),\n    },\n  });\n\n  const { write, data } = useContractWrite(config);\n\n  const { config: configRequest } = usePrepareContractWrite({\n    chainId: polygonMumbai.id,\n    address: \"0xEa187E4D0229a4e662558B6439c087c60831290b\",\n    abi: ABI,\n    functionName: \"createRequest\",\n    args: [requestAddress, requestAmount, requestMessage],\n  });\n\n  const { write: writeRequest, data: dataRequest } = useContractWrite(configRequest);\n\n\n  const { isSuccess } = useWaitForTransaction({\n    hash: data?.hash,\n  })\n\n  const { isSuccess: isSuccessRequest } = useWaitForTransaction({\n    hash: dataRequest?.hash,\n  })\n\n\n  const showPayModal = () => {\n    setPayModal(true);\n  };\n  const hidePayModal = () => {\n    setPayModal(false);\n  };\n\n  const showRequestModal = () => {\n    setRequestModal(true);\n  };\n  const hideRequestModal = () => {\n    setRequestModal(false);\n  };\n\n  useEffect(()=>{\n    if(isSuccess || isSuccessRequest){\n      getNameAndBalance();\n    }\n  },[isSuccess, isSuccessRequest])\n\n  return (\n    <>\n      <Modal\n        title=\"Confirm Payment\"\n        open={payModal}\n        onOk={() => {\n          write?.();\n          hidePayModal();\n        }}\n        onCancel={hidePayModal}\n        okText=\"Proceed To Pay\"\n        cancelText=\"Cancel\"\n      >\n        {requests && requests[\"0\"].length > 0 && (\n          <>\n            <h2>Sending payment to {requests[\"3\"][0]}</h2>\n            <h3>Value: {requests[\"1\"][0]} Matic</h3>\n            <p>\"{requests[\"2\"][0]}\"</p>\n          </>\n        )}\n      </Modal>\n      <Modal\n        title=\"Request A Payment\"\n        open={requestModal}\n        onOk={() => {\n          writeRequest?.();\n          hideRequestModal();\n        }}\n        onCancel={hideRequestModal}\n        okText=\"Proceed To Request\"\n        cancelText=\"Cancel\"\n      >\n        <p>Amount (Matic)</p>\n        <InputNumber value={requestAmount} onChange={(val)=>setRequestAmount(val)}/>\n        <p>From (address)</p>\n        <Input placeholder=\"0x...\" value={requestAddress} onChange={(val)=>setRequestAddress(val.target.value)}/>\n        <p>Message</p>\n        <Input placeholder=\"Lunch Bill...\" value={requestMessage} onChange={(val)=>setRequestMessage(val.target.value)}/>\n      </Modal>\n      <div className=\"requestAndPay\">\n        <div\n          className=\"quickOption\"\n          onClick={() => {\n            showPayModal();\n          }}\n        >\n          <DollarOutlined style={{ fontSize: \"26px\" }} />\n          Pay\n          {requests && requests[\"0\"].length > 0 && (\n            <div className=\"numReqs\">{requests[\"0\"].length}</div>\n          )}\n        </div>\n        <div\n          className=\"quickOption\"\n          onClick={() => {\n            showRequestModal();\n          }}\n        >\n          <SwapOutlined style={{ fontSize: \"26px\" }} />\n          Request\n        </div>\n      </div>\n    </>\n  );\n}\n\nexport default RequestAndPay;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}